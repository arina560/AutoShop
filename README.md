# AutoShop
МДиСУБД, 353501, Петрожицкая

## Описание
Проект представляет собой систему управления интернет-магазином автомобилей.  
Система включает функциональность для управления пользователями, автомобилями, брендами, моделями, заказами, корзинами и купонами.  

---

## Функциональные требования

1. **Авторизация/аутентификация пользователя**:
   - Регистрация нового пользователя с проверкой уникальности email.  
   - Вход в систему с использованием email и пароля.  
   - Выход из системы.  

2. **Управление пользователями (CRUD)**:
   - Администраторы могут создавать новых пользователей.  
   - Возможность просмотра списка пользователей с фильтрацией.  
   - Обновление информации о пользователях (пароль, имя, роль).  
   - Удаление учетных записей пользователей.  

3. **Система ролей**:
   - Клиент (customer).  
   - Менеджер (manager).  
   - Администратор (admin).  

4. **Управление каталогом автомобилей**:
   - Добавление, редактирование и удаление автомобилей.  
   - Хранение брендов и моделей.  
   - Указание характеристик автомобиля: год выпуска, цвет, цена, пробег, статус.  

5. **Система заказов**:
   - Добавление автомобилей в корзину.  
   - Оформление заказа с указанием адреса.  
   - Применение купона.  
   - Статусы заказов: *в обработке*, *оплачен*, *доставлен*, *отменён*.  

6. **Корзина**:
   - Временное хранение выбранных автомобилей перед оформлением заказа.  
   - Каждая корзина привязана к пользователю.  

7. **Система купонов и скидок**:
   - Купоны на фиксированную скидку.  
   - Проверка срока действия купона.  
   - Проверка минимальной суммы заказа.  

8. **Отзывы**:
   - Пользователь может оставить отзыв о купленном автомобиле.  
   - Оценка (1–5) и комментарий.  

---

## Описание таблиц

### 1. User (Пользователь)
**Назначение**: хранение информации о клиентах, менеджерах и администраторах.  
**Поля**:
- user_id: int (PK)  
- name: string  
- email: string (уникальный)  
- phone: string  
- role: enum (customer, manager, admin)  
- profile_picture: string (nullable)  

**Связь**: имеет много `Order`, `Address`, одну `Cart`, может оставлять много `Review`.  

---

### 2. Address (Адрес)
**Назначение**: хранение адресов доставки пользователей.  
**Поля**:
- address_id: int (PK)  
- user_id: int (FK → User)  
- city: string  
- street: string  
- house: string  
- apartment: string (nullable)  
- is_default: bool  

**Связь**: принадлежит `User`, используется в `Order`.  

---

### 3. Brand (Бренд)
**Назначение**: справочник брендов автомобилей.  
**Поля**:
- brand_id: int (PK)  
- name: string  
- country: string  

**Связь**: имеет много `Model`.  

---

### 4. Model (Модель)
**Назначение**: справочник моделей автомобилей.  
**Поля**:
- model_id: int (PK)  
- brand_id: int (FK → Brand)  
- name: string  
- body_type: string  
- engine_type: string  

**Связь**: принадлежит `Brand`, имеет много `Car`.  

---

### 5. Car (Автомобиль)
**Назначение**: конкретный автомобиль, выставленный на продажу.  
**Поля**:
- car_id: int (PK)  
- model_id: int (FK → Model)  
- supplier_id: int (FK → Supplier)  
- year: int  
- color: string  
- price: decimal  
- mileage: int (nullable)  
- status: enum (available, reserved, sold)  

**Связь**: принадлежит `Model` и `Supplier`, участвует в `Order` и `Review`.  

---

### 6. Supplier (Поставщик)
**Назначение**: хранение информации о поставщиках/дилерах автомобилей.  
**Поля**:
- supplier_id: int (PK)  
- name: string  
- contact_info: string  
- rating: decimal  

**Связь**: имеет много `Car`.  

---

### 7. Cart (Корзина)
**Назначение**: временное хранилище выбранных автомобилей перед заказом.  
**Поля**:
- cart_id: int (PK)  
- user_id: int (FK → User)  
- created_at: datetime  

**Связь**: принадлежит `User`, может быть преобразована в `Order`.  

---

### 8. Order (Заказ)
**Назначение**: оформление заказа автомобиля.  
**Поля**:
- order_id: int (PK)  
- user_id: int (FK → User)  
- car_id: int (FK → Car)  
- cart_id: int (FK → Cart, nullable)  
- total_amount: decimal  
- status: enum (pending, paid, delivered, cancelled)  
- created_at: datetime  
- coupon_id: int (FK → Coupon, nullable)  

**Связь**: принадлежит `User`, включает `Car`, может использовать `Coupon`.  

---

### 9. Coupon (Купон)
**Назначение**: предоставление скидки на заказ.  
**Поля**:
- coupon_id: int (PK)  
- code: string (уникальный)  
- discount_amount: decimal  
- min_order_amount: decimal  
- valid_from: datetime  
- valid_until: datetime  
- is_active: bool  

**Связь**: может быть применён к одному или нескольким `Order`.  

---

### 10. Review (Отзыв)
**Назначение**: отзывы пользователей об автомобилях.  
**Поля**:
- review_id: int (PK)  
- user_id: int (FK → User)  
- car_id: int (FK → Car)  
- rating: int (1–5)  
- comment: string  
- created_at: datetime  

**Связь**: принадлежит `User` и `Car`.  
